#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# @Date     : 2018-06-21 18:11:07
# @Author   : Albert Shi
# @Link     : http://blog.csdn.net/albertsh
# @Github   : https://github.com/AlbertGithubHome
__author__ = 'AlbertS'
# @Subject  : level 21 of python challenge
# 
# 思路：这一关没有网址，只有从上一关得到的一个文件package.pack，还有两句提示：
#       * We used to play this game when we were kids
#       * When I had no idea what to do, I looked backwards.
#       以上就是这一关的全部线索了，解题从此开始！
#       
#       打开文件输出前一百个字节信息发现：没有任何发现，也没找到规律！
#       通过观摩大神解题证明我的思路是对的，只是眼睛不太好使我输出的前一百个字节中前两个字节为b'x\x9c'
#       据说这是zlib压缩的头部标识，然后你会发现开头是b'BZ'的，这是bz2压缩的头部信息，然后又发现一个b'\x80\x8d'
#       然后这个什么也不是，再看看数据尾部信息，原理是b'x\x9c'，也就是通过zlib压缩之后再反转的
#       现在才明白上面的两条提示是什么意思，孩子时的翻来翻去，前一关用了解压和反转，所以这一关就是一直对数据进行
#       解压和反转，不过是解压还是反转需要通过数据头来确定，最后得到一句话b'look at your logs'，可是logs在哪呢？
#       原来孩子的游戏指定的是拼积木，四种操作（实际只有三种）分别用不同的字母表示，就能得到结果copper这就是下一
#       关的url=> copper.html
#
# 备注：1. python challenge home page : http://www.pythonchallenge.com/
#       2. current level url : package.pack 这一关只有一个文件 
#       3. next level url : http://www.pythonchallenge.com/pc/hex/copper.html
#       4. curlevel username:butter password:fly
#

import zlib
import bz2


def check_part_content():
    with open('./package.pack', 'rb') as file:
        return file.read()

def main():
    content_data = check_part_content()

    while True:
        if content_data[:2] == b'x\x9c':
            #print(content_data[:2])
            content_data = zlib.decompress(content_data);
            print(' ', end='')
        elif content_data[:2] == b'BZ':
            #print(content_data[:2])
            content_data = bz2.decompress(content_data);
            print('a', end='')
        elif content_data[-2:] == b'\x9cx':
            #print(content_data[-2:])
            content_data = zlib.decompress(content_data[::-1]);
            print('\n', end='')
        elif content_data[-2:] == b'ZB':
            #print(content_data[-2:])
            content_data = zlib.decompress(content_data[::-1]);
            print('b', end='')
        else:
            break
    print('\n', content_data)
    print(content_data[::-1])


if __name__ == '__main__':
    main()

# 前一百个字节信息
'''
b'x\x9c\x00\n@\xf5\xbfx\x9c\x00\x07@\xf8\xbfx\x9c\x00\x06@\xf9\xbfx\x9c\x00\xff?\x00\xc0x\x9c\x00\xff?\x00
\xc0x\x9c\x84vuT\x14N\xd46\xddH#\xad\x80\x84tH\x97\x80\x94\x80 -)\xd2\xdd \xb1HwHK\x834HK.\xbbt7K\x08\xcb\
xee\xd2\rK/\xb2(\x9f\xbf\xef}\xcf\xf9\xfe\xfc\xe6\x9f\x99\xb9\xe7\x99'
[Finished in 0.4s]
'''

# 数据的头部信息
'''
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'\x80\x8d'
b'r\xb5'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'\xe8\x14'
b'\x02v'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'\xdf\xe5'
b'\xdc\x96'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b':\xcc'
b'\x1f<'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'|\xa9'
b'\x9f\x0e'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'\x16\x01'
b'\xf7o'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'\xfb\x94'
b'\x8d\xf3'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'\xae#'
b'\x1d}'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'\x17\x03'
b'\xfdy'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'x\x9c'
b'BZ'
b'BZ'
b'sg'
b'sgol ruoy ta kool'
b'look at your logs'
[Finished in 2.2s]
'''

# 最终结果
'''
      aaa          aaa      aaaaaaaa    aaaaaaaa    aaaaaaaaaa  aaaaaaaa
   aaaaaaa      aaaaaaa    aaaaaaaaa   aaaaaaaaa   aaaaaaaaa   aaaaaaaaa
  aa     aa    aa     aa   aa      aa  aa      aa  aa          aa      aa
 aa           aa       aa  aa      aa  aa      aa  aa          aa      aa
 aa           aa       aa  aaaaaaaaa   aaaaaaaaa   aaaaaaaa    aaaaaaaaa
 aa           aa       aa  aaaaaaaa    aaaaaaaa    aaaaaaaa    aaaaaaaa 
 aa           aa       aa  aa          aa          aa          aa   aa 
  aa     aa    aa     aa   aa          aa          aa          aa    aa 
   aaaaaaa      aaaaaaa    aa          aa          aaaaaaaaa   aa     aa 
     aaa          aaa      aa          aa          aaaaaaaaaa  aa      aa
 b'sgol ruoy ta kool'
b'look at your logs'
[Finished in 2.0s]
'''